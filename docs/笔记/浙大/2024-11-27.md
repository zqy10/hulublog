---
date:
  created: 2024-10-02
categories: 
    - ç¬”è®°
tags:
    - æµ™å¤§
---
# æ•°æ®ç»“æ„åŸºç¡€ï¼ˆæ§é™¢ï¼‰

[:star:  æ•°æ®ç»“æ„ä¸ç®—æ³•å¯è§†åŒ–å®ç°](https://www.cs.usfca.edu/~galles/visualization/Algorithms.html)  
ğŸ§ª1ï¼šçº¿æ€§è¡¨  
!!!info
    æœ‰åºçº¿æ€§è¡¨çš„äº¤å¹¶é›†æ“ä½œã€‚

```python
# å…ƒç´ æŸ¥æ‰¾
def find(n, a):
    for i in range(len(a)):
        if n == a[i]:
            return 1
    return 0

# è¾“å‡ºå¹¶é›†
def union(a, b):
    print('å¹¶é›†ï¼š',end = '')
    c = []
    for i in range(len(a)):
        if not find(a[i], c):
            c.append(a[i])
    for i in range(len(b)):
        if not find(b[i], c):
            c.append(b[i])
    c.sort(reverse=False)
    for i in c:
        print(i, end = ' ')

# è¾“å‡ºäº¤é›†
def intersection(a, b):
    print('äº¤é›†ï¼š',end = '')
    d = []
    for i in range(len(a)):
        if find(a[i], b) and (not find(a[i],d)):
            d.append(a[i])
    d.sort(reverse=False)
    if len(d) == 0:
        print('æ— äº¤é›†')
        return
    for i in d:
        print(i, end = ' ')

if __name__ == "__main__":
    # å»ºç«‹æœ‰åºè¡¨
    a = list(map(int, input("è¾“å…¥è¡¨ A (å…ƒç´ ä¸ºæ•´æ•°ï¼Œä»¥ç©ºæ ¼ä¸ºé—´éš”): ").split(' ')))
    b = list(map(int, input("è¾“å…¥è¡¨ B (å…ƒç´ ä¸ºæ•´æ•°ï¼Œä»¥ç©ºæ ¼ä¸ºé—´éš”): ").split(' ')))
    # æ•´ç†é¡ºåº
    a.sort(reverse=False)
    b.sort(reverse=False)
    union(a, b)
    print('\n')
    intersection(a, b)
    print('\n')
```
ğŸ§ª2ï¼šæ ˆ  
!!!info
    ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼å¹¶è¾“å‡ºç»“æœã€‚
```c
#include<stdio.h>
#include<stdlib.h>
#define MAXN 100  
#define INF 1e5

/************************** README ******************************

å°†æµ‹è¯•æ•°æ®å†™åœ¨test.txtä¸­ï¼Œè¿è¡Œrun.shæ¥æµ‹è¯•
æµ‹è¯•æ•°æ®æ ¼å¼ï¼š[è¡¨è¾¾å¼];[å‚è€ƒç­”æ¡ˆ]

æ€è·¯ï¼š
1) é‡åˆ°æ•°æ®ï¼Œç›´æ¥å…¥æ•°æ®æ ˆ
2ï¼‰é‡åˆ°è¿ç®—ç¬¦ï¼Œä¸è¿ç®—ç¬¦æ ˆæ ˆé¡¶å…ƒç´ æ¯”è¾ƒä¼˜å…ˆçº§
    å¦‚æœè¿ç®—ç¬¦æ ˆä¸ºç©ºï¼Œæˆ–è€…ä¼˜å…ˆçº§æ¯”æ ˆé¡¶è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§è¾ƒé«˜ï¼Œåˆ™ç›´æ¥å…¥æ ˆ
    å¦åˆ™ï¼Œå°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼Œç›´åˆ°æ ˆé¡¶ä¼˜å…ˆçº§æ¯”è¿ç®—ç¬¦ä½ï¼Œå†å…¥æ ˆ
3ï¼‰å¦‚é‡â€œ ( â€ï¼Œåˆ™ç›´æ¥å‹å…¥è¿ç®—ç¬¦æ ˆ
   å¦‚é‡â€œ ) â€ï¼Œåˆ™ä¾æ¬¡å¼¹å‡ºæ ˆé¡¶è¿ç®—ç¬¦ï¼Œå¹¶å‹å…¥æ•°æ®æ ˆï¼Œç›´åˆ°é‡åˆ°" ( "ä¸ºæ­¢ï¼Œä¸¢å¼ƒæ‹¬å·
4ï¼‰é‡å¤ä»¥ä¸Šæ­¥éª¤
5ï¼‰å°†è¿ç®—ç¬¦æ ˆå‰©ä½™çš„è¿ç®—ç¬¦ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥æ•°æ®æ ˆ
6ï¼‰æ‹¼æ¥æ•°æ®æ ˆä¸­çš„å…ƒç´ å¹¶è¾“å‡ºï¼Œç»“æœå³ä¸ºä¸­ç¼€è¡¨è¾¾å¼æ‰€å¯¹åº”çš„åç¼€è¡¨è¾¾å¼

*****************************************************************/


// ä¼˜å…ˆçº§åŒ¹é…
int cal_pri(char a){
    if(a == '+' || a == '-'){
        return 1;
    }else if(a == '*' || a == '/'){
        return 2;
    }else if(a == '('){
        return 0;
    }else if(a == ')'){
        return 3;
    }else{
        return -1;
    }
}

// å››åˆ™è¿ç®—
double calculate(double num1, double num2, char op){
    if(num2 == 0 && op == '/'){
        return INF;
    }
    switch(op){
        case '+': return (double)(num1 + num2);
        case '-': return (double)(num1 - num2);
        case '*': return (double)(num1 * num2);
        case '/': return (double)(num1 / num2);
    }
}

int find(char *s, char a){
    int i = 0;
    while(s[i]!='\0'){
        if(s[i] == a){
            return i;
        }
        i++;
    }
    return -1;
}

int main(){

    // åˆå§‹åŒ–
    double num_stack[MAXN];
    char op_stack[MAXN];
    int num_top, op_top;
    num_top = op_top = -1;

    FILE *fp;
    // è¯»å–æµ‹è¯•ç‚¹æ–‡ä»¶
    fp = fopen("test.txt","r");
    if(fp == NULL){
        printf("è¯»å–æµ‹è¯•æ–‡ä»¶å¤±è´¥\n");
        return 0;
    }else{
        printf("è¯»å–æµ‹è¯•æ–‡ä»¶æˆåŠŸ\n");
    }

    char s[MAXN];
    int t = 1;
    while(fgets(s, MAXN, fp) != NULL){ 
        int i = 0;
        double temp = 0.0;
        int flag = 1;  // æ•°å­—æ­£è´Ÿå·
        int error = 0;  // è®¡ç®—é”™è¯¯åˆ¤æ–­
        int dot = 0;  //å°æ•°ç‚¹åˆ¤æ–­
        int pri = 0;
        double ans = 0;

        num_top = op_top = -1;

        if(find(s, ';') >= 0){   // ç”¨';'éš”å¼€è¡¨è¾¾å¼å’Œç­”æ¡ˆ
            s[find(s, ';')] = '\0';
        }

        printf("\ntest %d: ", t++);
        printf("%s\n",s);
        printf("åç¼€è¡¨è¾¾å¼ï¼š ");
        while(s[i]!='\n' && s[i]!='\0'){
            if(s[i] >= '0' && s[i] <= '9'){  //ä»¥å­—ç¬¦è¾“å‡ºï¼Œä»¥doubleå­˜å‚¨
                flag = 1;
                dot = 0;
                temp = 0.0;
                // åˆ¤æ–­æ˜¯å¦è´Ÿæ•°
                if((i == 1 && s[i-1] == '-')||(i > 1 && s[i-1] == '-' && (s[i-2] < '0' || s[i-2] > '9'))){
                    printf("%c", s[i-1]);
                    flag = -1;
                }
                // è·å–æ•°æ®
                while((s[i] >= '0' && s[i] <= '9') || s[i] == '.'){
                    printf("%c",s[i]);
                    if(s[i] == '.'){
                        dot = 1;
                        i++;
                        continue;
                    }
                    temp = temp * 10.0 + s[i] - '0';
                    if(dot){
                        dot ++;
                    }
                    i++;
                }
                // å°æ•°å¤„ç†
                while(dot > 1){
                    temp /= 10;
                    dot --;
                }
                num_top ++;
                num_stack[num_top] = temp * flag;
                printf(" ");
            }
            else{
                // åˆ¤æ–­æ˜¯å¦æ˜¯å‡æ³•
                if(s[i] == '-' && (i == 0 || (i > 0 && s[i+1]>='0' && s[i+1]<='9' && (s[i-1]<'0' || s[i-1]>'9')))){
                    i++;
                    continue;
                }
                // è®¡ç®—ä¼˜å…ˆçº§
                pri = cal_pri(s[i]);
                if(pri == -1){
                    printf("å­˜åœ¨æ— æ•ˆè¿ç®—ç¬¦\n");
                    error = 1;
                    break;
                }else{
                    // ä¼˜å…ˆçº§æ¯”æ ˆé¡¶å…ƒç´ é«˜åˆ™å…¥æ ˆ
                    if(op_top == -1 || s[i] == '(' || pri > cal_pri(op_stack[op_top])){
                        op_top ++;
                        op_stack[op_top] = s[i];
                    }
                    // ä¼˜å…ˆçº§ä½åˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ å¹¶è®¡ç®—ï¼Œå†å…¥æ ˆ
                    else if(pri <= cal_pri(op_stack[op_top])){
                        while(pri <= cal_pri(op_stack[op_top])){
                            printf("%c ", op_stack[op_top]);
                            ans = calculate(num_stack[num_top - 1], num_stack[num_top], op_stack[op_top]);
                            if(ans == INF){
                                error = 1;
                                break;
                            }
                            num_top -= 1;
                            num_stack[num_top] = ans;
                            op_top --;
                        }
                        op_top ++;
                        op_stack[op_top] = s[i];
                    }
                    // å¼¹å‡ºæ‹¬å·é—´çš„æ‰€æœ‰è¿ç®—ç¬¦
                    if(op_stack[op_top] == ')'){
                        op_top --;
                        while(op_stack[op_top] != '('){
                            printf("%c ", op_stack[op_top]);
                            ans = calculate(num_stack[num_top - 1], num_stack[num_top], op_stack[op_top]);
                            if(ans == INF){
                                error = 1;
                                break;
                            }
                            num_top -= 1;
                            num_stack[num_top] = ans;
                            op_top --;
                        }
                        op_top --;
                    }
                }
                i++;
            }
            if(error){
                break;
            }
        }
        // æ¸…ç©ºæ ˆ
        while(op_top >= 0){
            if(op_stack[op_top] == ')' || op_stack[op_top] == '('){
                op_top --;
                continue;
            }
            printf("%c ",op_stack[op_top]);
            ans = calculate(num_stack[num_top - 1], num_stack[num_top], op_stack[op_top]);
            if(ans == INF){
                error = 1;
                break;
            }
            num_top -= 1;
            num_stack[num_top] = ans;
            op_top --;

            if(error){
                break;
            }
        }
        printf("\n");

        if(error){
            printf("è®¡ç®—ç»“æœï¼š æ•°å­¦é”™è¯¯\n");
        }else{
            printf("è®¡ç®—ç»“æœï¼š %lf\n", num_stack[0]);
        }
        
        printf("å‚è€ƒç­”æ¡ˆï¼š ");
        if(s[i] == '\0'){
            i++;
            while(s[i] != '\0'){
                printf("%c", s[i]);
                i++;
            }
            printf("\n");
        }else{
            printf("æš‚æ— \n");
        }
    }
    
    fclose(fp);
    return 0;
}
```