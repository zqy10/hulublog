---
date:
  created: 2025-04-11
tags: 
    - Docker
comments: true
---
# Run Docker on Windows

It is my first blog write in English.  
If there's anything wrong please inform me...:smile:
---
## Preview
If you are using Linux or MacOS in your computer, there are certain circumstances that you need Windows to run some applications or for development use.  
And to run windows in other systems there are often three ways:
  
- [ ] Install Windows and get dual system
- [ ] Run Windows with VMs(Virtual Machine)
- [x] Run Windows in Docker

!!!note
    We are mainly dealing with docker in this tutorial.But I'd like to show you the advantages and disadvantages of each method before we start so that you can make a better choice.  
  
If you knows what you are doing, just skip to the next part.

> Install Windows and get dual system

The only but fatal disadvantage of this method is that usually , you have to restart your computer to exit the current system and get into windows.The advantage is obvious since you are running a real windows physically, you got all your hardwares working for a better performance.  

> Run Windows with VMs

This is more convinient than restart your computer. A Virtual Machine monitors the hardware, so that you're running your windows quite seperately.The disadvantage is that you waste your RAM and CPUs for running the VMs, so that it can slow down both inside and outside the VMs. And the installing process can be quite complex.  

> Run Windows in Docker

This aproach is what we concentrate on today.Using Docker, your get a rather seperated environment to run programs smoothly. Docker is like a container that provide just the amount of dependencies that you need. It's the best choice if you don't have a wonderful computer.

???success "Quick choose"
    If you don't mind restart everytime you want to use Windows, choose "Install Windows and get dual system"  
    If you have a good computer and a good tutorial, choose VMs  
    If you just want to run some windows applications, try docker.

---
## Qick Start
!!!tip 
    Two ingredients are all we need: <font color=cyen>Docker Engine</font> and a <font color=cyen>RDP server</font>.
### Docker Engine
> What is [Docker Engine](https://docs.docker.com/engine/):

Docker Engine is an open source containerization technology for building and containerizing your applications.  

!!!warning "It is highly recommended to install docker engine from the [official webite](https://docs.docker.com/engine/install/), where you can learn more."

To learn more about docker, see this article ---> [What is Docker](https://docs.docker.com/get-started/docker-overview/).  

- [x] Follow the steps from the [official website](https://docs.docker.com/engine/install/) and install docker.  

- [x] To check if you have installed docker, try this:

```bash
docker --version
```
You should see something like this:
```
Docker version 28.0.4, build b8034c0
```

- [x] To check if everything is working perfectly, try this:
  
```bash
docker run hello-world
```
You should see something start with:
```
Hello from Docker!
This message shows that your installation appears to be working correctly.
```
!!!tip 
    <font size=4>If you successfully installed docker( have the version information ) but failed to run hello-world due to some internet issues:
    Try `sudo` first !</font>

Only when you have your docker engine installed and working, follow the next steps.  

### Windows in Docker
> Reference Tutorial: [docker-windows](https://github.com/dockur/windows)
The easiest way to have windows run in your docker, just copy the following command into your terminal:

```bash
docker run -it --rm --name windows -p 8006:8006 --device=/dev/kvm --device=/dev/net/tun --cap-add NET_ADMIN -v ${PWD:-.}/windows:/storage --stop-timeout 120 dockurr/windows
```
!!!note "<font size =4 >But before you run it let me explain the command</font>"


This command starts a Docker container to run Windows VM using KVM/QEMU virtualization. It enables hardware acceleration, network bridging, and persistent storage.


> Basic Flags

[-it]() : Runs the container in interactive mode.  
[--rm]() : Automatically removes the container when it exits (avoids leftover containers).  
[--name windows]() : Assigns the name windows to the container.

> Network Configuration

[-p 8006:8006]() : Maps port 8006 on the host to port 8006 in the container (so that you can access the container at port 8006)

> Hardware Virtualization Support

[--device=/dev/kvm]() : Passes the host’s KVM (Kernel-based Virtual Machine) device to the container for hardware-accelerated virtualization.  
[--device=/dev/net/tun]() : Grants access to the host’s TUN/TAP device, enabling bridged or NAT networking for the VM.

> Permissions

[--cap-add NET_ADMIN]() : Gives the container network administration privileges (e.g., configuring interfaces, IP routing, or firewall rules).

> Storage Persistence

[-v ${PWD:-.}/windows:/storage]() : Mounts the host’s ./windows directory (PWD means current directory) to /storage in the container. VM disk files are stored here for persistence.

> Graceful Shutdown

[--stop-timeout 120]() : Waits 120 seconds after a stop signal before forcibly terminating the container (allows time for the VM to shut down safely).

> Image

[dockurr/windows]() : Uses a preconfigured Docker image designed for running Windows VMs with QEMU/KVM.



### RDP Server